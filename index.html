<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Project Price Calculator Dashboard</title>

    <!-- External Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="bg-gray-50">
    <!-- Sidebar -->
    <div class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-10">
      <div class="p-6 border-b">
        <h1 class="text-xl font-bold text-gray-800">Project Calculator</h1>
      </div>
      <nav class="mt-6">
        <a
          href="#"
          class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100"
          data-section="calculator"
        >
          <i class="fas fa-calculator mr-3"></i>
          New Estimation
        </a>

        <a
          href="#"
          class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100"
          data-section="projects"
        >
          <i class="fas fa-folder mr-3"></i>
          All Projects
        </a>
        <a
          href="#"
          class="sidebar-link flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100"
          data-section="full-amount"
          id="full-amount-btn"
        >
          <i class="fas fa-calculator mr-3"></i>
          Full Amount
        </a>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="ml-64 p-6">
      <!-- Calculator Section -->
      <div id="calculator-section" class="section">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">
            Project Cost Calculator
          </h2>
          <p class="text-gray-600">
            Enter either Development or UI/UX Design cost to auto-calculate all
            other costs
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Input Form -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold mb-4">Input Base Cost</h3>

            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Development Cost (BDT)</label
                >
                <input
                  type="number"
                  id="dev-cost"
                  placeholder="Enter development cost"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div class="text-center text-gray-500 font-medium">OR</div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >UI/UX Design Cost (BDT)</label
                >
                <input
                  type="number"
                  id="design-cost"
                  placeholder="Enter design cost"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Discount (%)</label
                >
                <input
                  type="number"
                  id="discount"
                  placeholder="Enter discount percentage"
                  value="0"
                  min="0"
                  max="100"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2"
                  >Project Name</label
                >
                <input
                  type="text"
                  id="project-name"
                  placeholder="Enter project name"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <button
                id="calculate-btn"
                class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200"
              >
                Calculate Costs
              </button>
            </div>
          </div>

          <!-- Cost Breakdown -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold mb-4">Cost Breakdown</h3>

            <div id="cost-breakdown" class="space-y-3">
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700">Development (40.5%)</span>
                <span class="font-semibold" id="dev-amount">BDT0.00</span>
              </div>
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700">UI/UX Design (26.5%)</span>
                <span class="font-semibold" id="design-amount">BDT0.00</span>
              </div>
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700">Client Communication (7.5%)</span>
                <span class="font-semibold" id="comm-amount">BDT0.00</span>
              </div>
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700"
                  >Project Management & QA (7.5%)</span
                >
                <span class="font-semibold" id="pm-amount">BDT0.00</span>
              </div>
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700"
                  >Agency Overhead & Profit (10%)</span
                >
                <span class="font-semibold" id="overhead-amount">BDT0.00</span>
              </div>
              <div
                class="calculation-row py-3 flex justify-between items-center"
              >
                <span class="text-gray-700">Broker Fee (8%)</span>
                <span class="font-semibold" id="broker-amount">BDT0.00</span>
              </div>

              <div class="border-t-2 pt-3 mt-4">
                <div
                  class="py-2 flex justify-between items-center text-lg font-semibold"
                >
                  <span>Subtotal</span>
                  <span id="subtotal">BDT0.00</span>
                </div>
                <div
                  class="py-2 flex justify-between items-center text-red-600"
                >
                  <span>TDS (10%)</span>
                  <span id="tds-amount">-BDT0.00</span>
                </div>
                <div
                  class="py-2 flex justify-between items-center text-green-600"
                  id="discount-row"
                  style="display: none"
                >
                  <span>Discount</span>
                  <span id="discount-amount">-BDT0.00</span>
                </div>
                <div
                  class="final-amount text-white py-3 px-4 rounded-lg flex justify-between items-center text-xl font-bold mt-2"
                >
                  <span>Final Payable</span>
                  <span id="final-amount">BDT0.00</span>
                </div>
              </div>
            </div>

            <button
              id="generate-pdf-btn"
              class="w-full mt-4 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition duration-200"
              disabled
            >
              Generate PDF Estimate
            </button>
          </div>
        </div>
      </div>

      <!-- Projects Section -->
      <div id="projects-section" class="section hidden">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">All Projects</h2>
          <p class="text-gray-600">View and manage your project estimates</p>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">Project List</h3>
            <button
              id="refresh-projects"
              class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"
            >
              <i class="fas fa-refresh mr-2"></i>Refresh
            </button>
          </div>

          <div id="projects-list" class="space-y-3">
            <!-- Projects will be populated here -->
          </div>
        </div>
      </div>

      <!-- PDF Editor Modal -->
      <div
        id="pdf-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden"
      >
        <div class="flex items-center justify-center min-h-screen p-4">
          <div
            class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"
          >
            <div class="p-6 border-b">
              <div class="flex justify-between items-center">
                <h3 class="text-xl font-semibold">PDF Document Editor</h3>
                <button
                  id="close-modal"
                  class="text-gray-500 hover:text-gray-700"
                >
                  <i class="fas fa-times text-xl"></i>
                </button>
              </div>
            </div>

            <div class="p-6">
              <!-- Letterhead Section -->
              <div class="letterhead-bg rounded-lg p-6 mb-6 text-white">
                <div class="flex items-center justify-between">
                  <div>
                    <h2 class="text-2xl font-bold">PROJECT ESTIMATE</h2>
                    <p class="mt-2">Professional Cost Calculation</p>
                  </div>
                  <div class="text-right">
                    <p class="text-sm opacity-90">
                      Date: <span id="pdf-date"></span>
                    </p>
                    <p class="text-sm opacity-90">
                      Project ID: <span id="pdf-project-id"></span>
                    </p>
                  </div>
                </div>
              </div>

              <!-- Rich Text Editor -->
              <div class="mb-6">
                <div
                  class="editor-toolbar mb-3 flex flex-wrap gap-2 p-3 bg-gray-100 rounded-t-lg"
                >
                  <button
                    onclick="formatText('bold')"
                    class="format-btn"
                    data-command="bold"
                  >
                    <i class="fas fa-bold"></i>
                  </button>
                  <button
                    onclick="formatText('italic')"
                    class="format-btn"
                    data-command="italic"
                  >
                    <i class="fas fa-italic"></i>
                  </button>
                  <button
                    onclick="formatText('underline')"
                    class="format-btn"
                    data-command="underline"
                  >
                    <i class="fas fa-underline"></i>
                  </button>
                  <div class="border-l border-gray-400 mx-2"></div>
                  <button
                    onclick="formatText('foreColor', '#ff0000')"
                    class="format-btn"
                  >
                    <i class="fas fa-palette"></i> Red
                  </button>
                  <button
                    onclick="formatText('foreColor', '#0000ff')"
                    class="format-btn"
                  >
                    <i class="fas fa-palette"></i> Blue
                  </button>
                  <button
                    onclick="formatText('foreColor', '#008000')"
                    class="format-btn"
                  >
                    <i class="fas fa-palette"></i> Green
                  </button>
                  <div class="border-l border-gray-400 mx-2"></div>
                  <button onclick="insertHorizontalRule()" class="format-btn">
                    <i class="fas fa-minus"></i> Line
                  </button>
                  <button onclick="insertTable()" class="format-btn">
                    <i class="fas fa-table"></i> Table
                  </button>
                  <button onclick="insertIcon()" class="format-btn">
                    <i class="fas fa-icons"></i> Icon
                  </button>
                </div>

                <div
                  id="rich-editor"
                  class="rich-editor rounded-b-lg"
                  contenteditable="true"
                >
                  <h3>Project Description</h3>
                  <p>
                    Enter your project details, terms, and conditions here...
                  </p>
                  <br />
                  <p><strong>Key Features:</strong></p>
                  <ul>
                    <li>Feature 1</li>
                    <li>Feature 2</li>
                    <li>Feature 3</li>
                  </ul>
                  <br />
                  <p>
                    <strong>Timeline:</strong> Project completion estimated in X
                    weeks
                  </p>
                  <br />
                  <p><strong>Terms & Conditions:</strong></p>
                  <p>Payment terms and project conditions...</p>
                </div>
              </div>

              <!-- Cost Summary in PDF -->
              <div id="pdf-cost-summary" class="bg-gray-50 p-4 rounded-lg mb-6">
                <h4 class="text-lg font-semibold mb-3">
                  Cost Breakdown Summary
                </h4>
                <div id="pdf-cost-table">
                  <!-- Cost table will be populated here -->
                </div>
              </div>

              <div class="flex justify-end space-x-3">
                <button
                  id="save-pdf"
                  class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700"
                >
                  <i class="fas fa-save mr-2"></i>Save PDF
                </button>
                <button
                  id="download-pdf"
                  class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700"
                >
                  <i class="fas fa-download mr-2"></i>Download PDF
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Files -->
    <script>
      document
        .getElementById("full-amount-btn")
        .addEventListener("click", function (e) {
          e.preventDefault(); // Prevent default anchor link behavior
          window.location.href = "backup/index.html"; // Redirect to the backup folder's index.html
        });
    </script>
    <script src="js/config.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/pdfEditor.js"></script>
    <script src="js/pdfGenerator.js"></script>
    <script src="js/projectManager.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
